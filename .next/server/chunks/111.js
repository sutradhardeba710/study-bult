"use strict";exports.id=111,exports.ids=[111],exports.modules={3795:(e,t,s)=>{s.d(t,{Z:()=>r});let r=(0,s(3592).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},9972:(e,t,s)=>{s.d(t,{Z:()=>r});let r=(0,s(3592).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3604:(e,t,s)=>{s.d(t,{Z:()=>r});let r=(0,s(3592).Z)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},9111:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>m});var a=s(997),c=s(6689),l=s(7415),i=s(776),d=s(3917),n=s(3604),o=s(3795),x=s(9972),h=s(1560),p=e([l,i]);[l,i]=p.then?(await p)():p;let m=()=>{let{userProfile:e}=(0,l.a)(),[t,s]=(0,c.useState)([]),[r,p]=(0,c.useState)(!0);(0,c.useEffect)(()=>{(async()=>{if(e?.uid)try{let t=await (0,i.R5)(e.uid);s(t)}catch(e){console.error("Error fetching papers:",e)}finally{p(!1)}})()},[e?.uid]);let m=async e=>{if(confirm("Are you sure you want to delete this paper?"))try{await (0,i.uG)(e),s(t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting paper:",e)}},u=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},y=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Uploads"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[t.length," paper",1!==t.length?"s":""," uploaded"]})]}),0===t.length?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[a.jsx(d.Z,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No papers uploaded yet"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Start sharing your question papers with the community"}),a.jsx("a",{href:"/dashboard/upload",className:"btn-primary inline-flex items-center",children:"Upload Your First Paper"})]}):a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paper"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stats"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary-100 flex items-center justify-center",children:a.jsx(d.Z,{className:"w-5 h-5 text-primary-600"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.title}),a.jsx("div",{className:"text-sm text-gray-500",children:u(e.fileSize)})]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:e.subject}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.semester," â€¢ ",e.course]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"approved"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(n.Z,{className:"w-4 h-4 text-red-500 mr-1"}),e.likeCount||0]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(o.Z,{className:"w-4 h-4 text-blue-500 mr-1"}),e.downloadCount||0]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y(e.createdAt)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("a",{href:e.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-900",children:a.jsx(x.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>m(e.id),className:"text-red-600 hover:text-red-900",children:a.jsx(h.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})})]})};r()}catch(e){r(e)}})},776:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{R5:()=>n,Y$:()=>x,iG:()=>o,uG:()=>h});var a=s(1492),c=s(2770),l=e([a,c]);[a,c]=l.then?(await l)():l;let i=async(e={},t=20)=>{try{let s=(0,a.collection)(c.db,"papers"),r=[];e.college&&r.push((0,a.where)("college","==",e.college)),e.semester&&r.push((0,a.where)("semester","==",e.semester)),e.course&&r.push((0,a.where)("course","==",e.course)),e.subject&&r.push((0,a.where)("subject","==",e.subject)),e.examType&&r.push((0,a.where)("examType","==",e.examType)),e.status&&r.push((0,a.where)("status","==",e.status)),e.uploaderId&&r.push((0,a.where)("uploaderId","==",e.uploaderId)),r.push((0,a.orderBy)("createdAt","desc")),r.push((0,a.limit)(t));let l=(0,a.query)(s,...r),i=await (0,a.getDocs)(l),d=[];return i.forEach(e=>{d.push({id:e.id,...e.data()})}),d}catch(e){throw console.error("Error fetching papers:",e),e}},d=async e=>{try{let t=await (0,a.getDoc)((0,a.doc)(c.db,"papers",e));if(t.exists())return{id:t.id,...t.data()};return null}catch(e){throw console.error("Error fetching paper:",e),e}},n=async e=>i({uploaderId:e}),o=async e=>{try{let t=(0,a.query)((0,a.collection)(c.db,"likes"),(0,a.where)("userId","==",e)),s=(await (0,a.getDocs)(t)).docs.map(e=>e.data().paperId);if(0===s.length)return[];let r=[];for(let e of s){let t=await d(e);t&&r.push(t)}return r}catch(e){throw console.error("Error fetching liked papers:",e),e}},x=async(e,t)=>{try{let s=(0,a.query)((0,a.collection)(c.db,"likes"),(0,a.where)("paperId","==",e),(0,a.where)("userId","==",t)),r=await (0,a.getDocs)(s);r.empty||await (0,a.deleteDoc)(r.docs[0].ref);let l=(0,a.doc)(c.db,"papers",e);await (0,a.updateDoc)(l,{likeCount:(0,a.increment)(-1)})}catch(e){throw console.error("Error unliking paper:",e),e}},h=async e=>{try{await (0,a.deleteDoc)((0,a.doc)(c.db,"papers",e))}catch(e){throw console.error("Error deleting paper:",e),e}};r()}catch(e){r(e)}})}};
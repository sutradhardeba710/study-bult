"use strict";(()=>{var e={};e.id=452,e.ids=[452,660],e.modules={1323:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},4291:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>f,default:()=>h,getServerSideProps:()=>y,getStaticPaths:()=>x,getStaticProps:()=>m,reportWebVitals:()=>g,routeModule:()=>N,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>w,unstable_getStaticProps:()=>b});var s=r(7093),i=r(5244),l=r(1323),n=r(1682),c=r.n(n),o=r(8141),d=r.n(o),p=r(3030),u=e([p]);p=(u.then?(await u)():u)[0];let h=(0,l.l)(p,"default"),m=(0,l.l)(p,"getStaticProps"),x=(0,l.l)(p,"getStaticPaths"),y=(0,l.l)(p,"getServerSideProps"),f=(0,l.l)(p,"config"),g=(0,l.l)(p,"reportWebVitals"),b=(0,l.l)(p,"unstable_getStaticProps"),w=(0,l.l)(p,"unstable_getStaticPaths"),j=(0,l.l)(p,"unstable_getStaticParams"),v=(0,l.l)(p,"unstable_getServerProps"),P=(0,l.l)(p,"unstable_getServerSideProps"),N=new s.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/dashboard/LikedPapers",pathname:"/dashboard/LikedPapers",bundlePath:"",filename:""},components:{App:d(),Document:c()},userland:p});a()}catch(e){a(e)}})},3592:(e,t,r)=>{r.d(t,{Z:()=>p});var a=r(6689);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),l=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:i="",children:l,iconNode:d,...p},u)=>(0,a.createElement)("svg",{ref:u,...o,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:n("lucide",i),...!l&&!c(p)&&{"aria-hidden":"true"},...p},[...d.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(l)?l:[l]])),p=(e,t)=>{let r=(0,a.forwardRef)(({className:r,...i},c)=>(0,a.createElement)(d,{ref:c,iconNode:t,className:n(`lucide-${s(l(e))}`,`lucide-${e}`,r),...i}));return r.displayName=l(e),r}},3795:(e,t,r)=>{r.d(t,{Z:()=>a});let a=(0,r(3592).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},9972:(e,t,r)=>{r.d(t,{Z:()=>a});let a=(0,r(3592).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3917:(e,t,r)=>{r.d(t,{Z:()=>a});let a=(0,r(3592).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},3604:(e,t,r)=>{r.d(t,{Z:()=>a});let a=(0,r(3592).Z)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},8141:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let a=r(5577),s=r(997),i=a._(r(6689)),l=r(5782);async function n(e){let{Component:t,ctx:r}=e;return{pageProps:await (0,l.loadGetInitialProps)(t,r)}}class c extends i.default.Component{render(){let{Component:e,pageProps:t}=this.props;return(0,s.jsx)(e,{...t})}}c.origGetInitialProps=n,c.getInitialProps=n,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7415:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{a:()=>d}),r(997);var s=r(6689),i=r(401),l=r(1492),n=r(2770),c=e([i,l,n]);[i,l,n]=c.then?(await c)():c;let o=(0,s.createContext)(void 0),d=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e};a()}catch(e){a(e)}})},3030:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>h});var s=r(997),i=r(6689),l=r(7415),n=r(776),c=r(3604),o=r(3917),d=r(3795),p=r(9972),u=e([l,n]);[l,n]=u.then?(await u)():u;let h=()=>{let{userProfile:e}=(0,l.a)(),[t,r]=(0,i.useState)([]),[a,u]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{if(e?.uid)try{let t=await (0,n.iG)(e.uid);r(t)}catch(e){console.error("Error fetching liked papers:",e)}finally{u(!1)}})()},[e?.uid]);let h=async a=>{if(e?.uid)try{await (0,n.Y$)(a,e.uid),r(t.filter(e=>e.id!==a))}catch(e){console.error("Error unliking paper:",e)}},m=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Liked Papers"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[t.length," paper",1!==t.length?"s":""," liked"]})]}),0===t.length?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[s.jsx(c.Z,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No liked papers yet"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Papers you like will appear here for easy access"}),s.jsx("a",{href:"/browse",className:"btn-primary inline-flex items-center",children:"Browse Papers"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,s.jsxs)("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:s.jsx(o.Z,{className:"w-5 h-5 text-primary-600"})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:e.title}),s.jsx("p",{className:"text-sm text-gray-500",children:e.subject})]})]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[s.jsx("span",{children:e.course}),s.jsx("span",{children:e.semester})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[s.jsx("span",{children:e.examType}),s.jsx("span",{children:m(e.createdAt)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center text-gray-600",children:[s.jsx(c.Z,{className:"w-4 h-4 text-red-500 mr-1"}),e.likeCount||0]}),(0,s.jsxs)("div",{className:"flex items-center text-gray-600",children:[s.jsx(d.Z,{className:"w-4 h-4 text-blue-500 mr-1"}),e.downloadCount||0]})]}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["by ",e.uploaderName]})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex items-center space-x-2",children:[(0,s.jsxs)("a",{href:e.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1 btn-primary text-center text-sm py-2",children:[s.jsx(p.Z,{className:"w-4 h-4 mr-1 inline"}),"View"]}),(0,s.jsxs)("a",{href:e.fileUrl,download:!0,className:"flex-1 btn-secondary text-center text-sm py-2",children:[s.jsx(d.Z,{className:"w-4 h-4 mr-1 inline"}),"Download"]}),s.jsx("button",{onClick:()=>h(e.id),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Unlike",children:s.jsx(c.Z,{className:"w-4 h-4 fill-current"})})]})]})},e.id))})]})};a()}catch(e){a(e)}})},2770:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{db:()=>d,tO:()=>p});var s=r(3745),i=r(401),l=r(1492),n=r(3392),c=e([s,i,l,n]);[s,i,l,n]=c.then?(await c)():c;let o=(0,s.initializeApp)({apiKey:"your-api-key",authDomain:"your-project.firebaseapp.com",projectId:"your-project-id",storageBucket:"your-project.appspot.com",messagingSenderId:"your-sender-id",appId:"your-app-id"});(0,i.getAuth)(o);let d=(0,l.getFirestore)(o),p=(0,n.getStorage)(o);a()}catch(e){a(e)}})},776:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{R5:()=>o,Y$:()=>p,iG:()=>d,uG:()=>u});var s=r(1492),i=r(2770),l=e([s,i]);[s,i]=l.then?(await l)():l;let n=async(e={},t=20)=>{try{let r=(0,s.collection)(i.db,"papers"),a=[];e.college&&a.push((0,s.where)("college","==",e.college)),e.semester&&a.push((0,s.where)("semester","==",e.semester)),e.course&&a.push((0,s.where)("course","==",e.course)),e.subject&&a.push((0,s.where)("subject","==",e.subject)),e.examType&&a.push((0,s.where)("examType","==",e.examType)),e.status&&a.push((0,s.where)("status","==",e.status)),e.uploaderId&&a.push((0,s.where)("uploaderId","==",e.uploaderId)),a.push((0,s.orderBy)("createdAt","desc")),a.push((0,s.limit)(t));let l=(0,s.query)(r,...a),n=await (0,s.getDocs)(l),c=[];return n.forEach(e=>{c.push({id:e.id,...e.data()})}),c}catch(e){throw console.error("Error fetching papers:",e),e}},c=async e=>{try{let t=await (0,s.getDoc)((0,s.doc)(i.db,"papers",e));if(t.exists())return{id:t.id,...t.data()};return null}catch(e){throw console.error("Error fetching paper:",e),e}},o=async e=>n({uploaderId:e}),d=async e=>{try{let t=(0,s.query)((0,s.collection)(i.db,"likes"),(0,s.where)("userId","==",e)),r=(await (0,s.getDocs)(t)).docs.map(e=>e.data().paperId);if(0===r.length)return[];let a=[];for(let e of r){let t=await c(e);t&&a.push(t)}return a}catch(e){throw console.error("Error fetching liked papers:",e),e}},p=async(e,t)=>{try{let r=(0,s.query)((0,s.collection)(i.db,"likes"),(0,s.where)("paperId","==",e),(0,s.where)("userId","==",t)),a=await (0,s.getDocs)(r);a.empty||await (0,s.deleteDoc)(a.docs[0].ref);let l=(0,s.doc)(i.db,"papers",e);await (0,s.updateDoc)(l,{likeCount:(0,s.increment)(-1)})}catch(e){throw console.error("Error unliking paper:",e),e}},u=async e=>{try{await (0,s.deleteDoc)((0,s.doc)(i.db,"papers",e))}catch(e){throw console.error("Error deleting paper:",e),e}};a()}catch(e){a(e)}})},5244:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},5315:e=>{e.exports=require("path")},3745:e=>{e.exports=import("firebase/app")},401:e=>{e.exports=import("firebase/auth")},1492:e=>{e.exports=import("firebase/firestore")},3392:e=>{e.exports=import("firebase/storage")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[682],()=>r(4291));module.exports=a})();